<!doctype html>
<html lang="en" class="no-js">
<head>
    <base href="https://efekarakus.github.io/copilot-demo-docs/">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.72.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/copilot-demo-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/copilot-demo-docs/favicons/android-192x192.png" sizes="192x192">

<title>Services | AWS Copilot CLI</title><meta property="og:title" content="Services" />
<meta property="og:description" content="One of the awesome things about containers is that once you&rsquo;ve written your code, running it locally is as easy as typing docker run. Copilot makes running those same containers on AWS as easy as running copilot init. Copilot will build your image, push it to Amazon ECR and set up all the infrastructure to run your service in a scalable and secure way.
Creating a Service Creating a service to run your containers on AWS can be done in a few ways." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://efekarakus.github.io/copilot-demo-docs/docs/concepts/services/" />
<meta property="article:published_time" content="2017-01-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-02T11:51:51-07:00" /><meta property="og:site_name" content="AWS Copilot CLI" />
<meta itemprop="name" content="Services">
<meta itemprop="description" content="One of the awesome things about containers is that once you&rsquo;ve written your code, running it locally is as easy as typing docker run. Copilot makes running those same containers on AWS as easy as running copilot init. Copilot will build your image, push it to Amazon ECR and set up all the infrastructure to run your service in a scalable and secure way.
Creating a Service Creating a service to run your containers on AWS can be done in a few ways.">
<meta itemprop="datePublished" content="2017-01-05T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-07-02T11:51:51-07:00" />
<meta itemprop="wordCount" content="1276">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Services"/>
<meta name="twitter:description" content="One of the awesome things about containers is that once you&rsquo;ve written your code, running it locally is as easy as typing docker run. Copilot makes running those same containers on AWS as easy as running copilot init. Copilot will build your image, push it to Amazon ECR and set up all the infrastructure to run your service in a scalable and secure way.
Creating a Service Creating a service to run your containers on AWS can be done in a few ways."/>





<link rel="preload" href="/copilot-demo-docs/scss/main.min.0d1a49efc2e872ca160c4f394f72ea1e7ef1911d8a7835a145968d5d3c23f279.css" as="style">
<link href="/copilot-demo-docs/scss/main.min.0d1a49efc2e872ca160c4f394f72ea1e7ef1911d8a7835a145968d5d3c23f279.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


</head>
<body class="td-page">
<div class="container-fluid td-outer">
    <div class="container">
        <div class="td-main">
            <div class="row flex-xl-nowrap">
                <div class="col-12 col-md-3 col-xl-3 td-sidebar d-print-none" style="padding-left: -15px;">
                    <nav class="navbar" style="padding-left: 0px;">
                        <a class="navbar-brand" href="/copilot-demo-docs/">
                            <span class="navbar-logo"></span><span class="site-title">$ copilot</span>
                        </a>
                    </nav>
                    




<div id="td-sidebar-menu" class="td-sidebar__inner">
        <form class="td-sidebar__search d-flex align-items-center p-0">
            
            <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
            </button>
        </form>
    <nav class="collapse td-sidebar-nav pl-4" id="td-section-nav">
        
        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocs">
                
                
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
        </li>
        <ul>
            <li class="collapse " id="copilot-demo-docsdocsinstallation">
                
                
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting started</a>
        </li>
        <ul>
            <li class="collapse " id="copilot-demo-docsdocsgetting-started">
                
                
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/concepts/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Concepts</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocsconcepts">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsconceptsapplications" href="/copilot-demo-docs/docs/concepts/applications/">Applications</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsconceptsenvironments" href="/copilot-demo-docs/docs/concepts/environments/">Environments</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page  active" id="m-copilot-demo-docsdocsconceptsservices" href="/copilot-demo-docs/docs/concepts/services/">Services</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsconceptspipelines" href="/copilot-demo-docs/docs/concepts/pipelines/">Pipelines</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/service-types/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Service types</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocsservice-types">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsservice-typeslb-web-service" href="/copilot-demo-docs/docs/service-types/lb-web-service/">Load Balanced Web Service</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsservice-typesbackend-service" href="/copilot-demo-docs/docs/service-types/backend-service/">Backend Service</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/manifests/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Manifests</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocsmanifests">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsmanifestslb-web-service" href="/copilot-demo-docs/docs/manifests/lb-web-service/">Load Balanced Web Service</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsmanifestsbackend-service" href="/copilot-demo-docs/docs/manifests/backend-service/">Backend Service</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/developing/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Developing</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocsdeveloping">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsdevelopingenv-vars" href="/copilot-demo-docs/docs/developing/env-vars/">Environment Variables</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsdevelopingsecrets" href="/copilot-demo-docs/docs/developing/secrets/">Using Secrets</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsdevelopingservice-discovery" href="/copilot-demo-docs/docs/developing/service-discovery/">Service Discovery</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsdevelopingaddons" href="/copilot-demo-docs/docs/developing/addons/">Additional AWS Resources</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocsdevelopingsidecars" href="/copilot-demo-docs/docs/developing/sidecars/">Sidecars</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/commands/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Commands</a>
        </li>
        <ul>
            <li class="collapse " id="copilot-demo-docsdocscommands">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsinit" href="/copilot-demo-docs/docs/commands/init/">init</a>
                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/commands/app/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">app</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocscommandsapp">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsappinit" href="/copilot-demo-docs/docs/commands/app/init/">app init</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsappls" href="/copilot-demo-docs/docs/commands/app/ls/">app ls</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsappshow" href="/copilot-demo-docs/docs/commands/app/show/">app show</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsappdelete" href="/copilot-demo-docs/docs/commands/app/delete/">app delete</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/commands/env/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">env</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocscommandsenv">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsenvinit" href="/copilot-demo-docs/docs/commands/env/init/">env init</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsenvls" href="/copilot-demo-docs/docs/commands/env/ls/">env ls</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsenvdelete" href="/copilot-demo-docs/docs/commands/env/delete/">env delete</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/commands/svc/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">svc</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocscommandssvc">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcinit" href="/copilot-demo-docs/docs/commands/svc/init/">svc init</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcls" href="/copilot-demo-docs/docs/commands/svc/ls/">svc ls</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcshow" href="/copilot-demo-docs/docs/commands/svc/show/">svc show</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvclogs" href="/copilot-demo-docs/docs/commands/svc/logs/">svc logs</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcstatus" href="/copilot-demo-docs/docs/commands/svc/status/">svc status</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcpackage" href="/copilot-demo-docs/docs/commands/svc/package/">svc package</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcdeploy" href="/copilot-demo-docs/docs/commands/svc/deploy/">svc deploy</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandssvcdelete" href="/copilot-demo-docs/docs/commands/svc/delete/">svc delete</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
    
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3">
        <li class="td-sidebar-nav__section-title">
            <a  href="/copilot-demo-docs/docs/commands/pipeline/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">pipeline</a>
        </li>
        <ul>
            <li class="collapse show" id="copilot-demo-docsdocscommandspipeline">
                
                
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandspipelineinit" href="/copilot-demo-docs/docs/commands/pipeline/init/">pipeline init</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandspipelineupdate" href="/copilot-demo-docs/docs/commands/pipeline/update/">pipeline update</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandspipelinedelete" href="/copilot-demo-docs/docs/commands/pipeline/delete/">pipeline delete</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsdeploy" href="/copilot-demo-docs/docs/commands/deploy/">deploy</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandsversion" href="/copilot-demo-docs/docs/commands/version/">version</a>
                    
                
                    
                        
                        
                        <a class="td-sidebar-link td-sidebar-link__page " id="m-copilot-demo-docsdocscommandscompletion" href="/copilot-demo-docs/docs/commands/completion/">completion</a>
                    
                
            </li>
        </ul>
    </ul>

                    
                
            </li>
        </ul>
    </ul>

    </nav>
</div>




                </div>
                <main class="col-12 col-md-9 col-xl-9 pl-md-5 documentation" role="main" style="padding-top: 0.7rem;">
                    
  

                    <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
    <ol class="breadcrumb spb-1" style="width: 100%;">
        <div style="text-align: right; width: 100%; padding: 0.2rem 0.9rem;">
            
    
        
            
    
        
            
    
        
    
    
    <li class="breadcrumb-item"  style="display: inline;">
        <a href="https://efekarakus.github.io/copilot-demo-docs/docs/" class="nav-link-breadcrumb">Documentation</a>
    </li>

        
    
    
    <li class="breadcrumb-item"  style="display: inline;">
        <a href="https://efekarakus.github.io/copilot-demo-docs/docs/concepts/" class="nav-link-breadcrumb">Concepts</a>
    </li>

        
    
    
    <li class="breadcrumb-item active" aria-current="page" style="display: inline;">
        <a href="https://efekarakus.github.io/copilot-demo-docs/docs/concepts/services/" class="nav-link-breadcrumb">Services</a>
    </li>

        </div>
    </ol>
</nav	>

                    
<div class="td-content">
	<h1>Services</h1>
    
	       
	<p>One of the awesome things about containers is that once you&rsquo;ve written your code, running it locally is as easy as typing  <em>docker run</em>.
Copilot makes running those same containers on AWS as easy as running <em>copilot init</em>.
Copilot will build your image, push it to Amazon ECR and set up all the infrastructure to run your service in a scalable and secure way.</p>
<h3 id="creating-a-service">Creating a Service</h3>
<p>Creating a service to run your containers on AWS can be done in a few ways. The easiest way is by running the <em>init</em> command from the same directory as your Dockerfile.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ copilot init
</code></pre></div><p>You&rsquo;ll be asked which application do you want this service to be a part of (or to create an application if there isn&rsquo;t one). Copilot will then ask about the <strong>type</strong> of service you&rsquo;re trying to build.</p>
<p>After selecting a service type, Copilot will detect any health checks or exposed ports from your Dockerfile and ask if you&rsquo;d like to deploy.</p>
<h3 id="choosing-a-service-type">Choosing a Service Type</h3>
<p>We mentioned before that Copilot will set up all the infrastructure your service needs to run. But how does it know what kind of infrastructure to use?</p>
<p>When you&rsquo;re setting up a service, Copilot will ask you about what kind of service you want to build. Do you want your service to serve internet traffic? You can select a <strong>Load Balanced Web Service</strong> and Copilot will provision an application load balancer, security groups, an ECS Service and run your service on Fargate.</p>
<p>If you want a service that can&rsquo;t be accessed externally, but only from other services within your application, you can create a <strong>Backend Service</strong>. Copilot will provision an ECS Service running on AWS Fargate, but won&rsquo;t set up any internet-facing endpoints.</p>
<p>Currently there are a few service types supported:</p>
<ul>
<li>Load Balanced Web Service</li>
<li>Backend Service</li>
</ul>
<h3 id="config-and-the-manifest">Config and the Manifest</h3>
<p>After you&rsquo;ve run <em>copilot init</em> you might have noticed that Copilot created a file called <code>manifest.yml</code> in the copilot directory. This manifest file contains common configuration options for your service. While the exact set of options depends on the type of service you&rsquo;re running, common ones include the resources allocated to your service (like memory and CPU), health checks, and environment variables.</p>
<p>Let&rsquo;s take a look at the manifest for a Load Balanced Web Service called <em>front-end</em>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>front-end<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>Load<span style="color:#f8f8f8;text-decoration:underline"> </span>Balanced<span style="color:#f8f8f8;text-decoration:underline"> </span>Web<span style="color:#f8f8f8;text-decoration:underline"> </span>Service<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Path to your service&#39;s Dockerfile.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">build</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>./Dockerfile<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Port exposed through your container to route traffic to it.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">http</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Requests to this path will be forwarded to your service.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># To match all requests you can use the &#34;/&#34; path.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;/&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># You can specify a custom health check path. The default is &#34;/&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># healthcheck: &#39;/&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># Number of CPU units for the task.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">cpu</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">256</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># Amount of memory in MiB used by the task.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">512</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># Number of tasks that should be running in your service.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">count</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># Optional fields for more advanced use-cases.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">variables</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Pass environment variables as key value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">LOG_LEVEL</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>info<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#secrets:                         # Pass secrets from AWS Systems Manager (SSM) Parameter Store.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#  GITHUB_TOKEN: GH_SECRET_TOKEN  # The key is the name of the environment variable,</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">                                  </span><span style="color:#8f5902;font-style:italic"># the value is the name of the SSM parameter.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># You can override any of the values defined above by environment.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">environments</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">prod</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">count</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># Number of tasks to run for the &#34;test&#34; environment.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><h4 id="image">Image</h4>
<p>The image section contains just a few parameters, the location of the Dockerfile and the port exposed. For a Load Balanced Web Service, the port is where traffic is forwarded to. Copilot will auto-populate this field if there&rsquo;s an <code>EXPOSE</code> command in your Dockerfile.</p>
<h4 id="http">HTTP</h4>
<p>The HTTP section is unique to the Load Balanced Web Service type. When a request comes to the load balancer, traffic will be fowraded to this service if the path matches &lsquo;/&rsquo; - meaning any traffic will be forwarded to this service. You could update this so that only traffic to the <em>front-end</em> path would be routed to this service by updating the path to be <code>path: 'front-end'</code>.</p>
<p>There&rsquo;s also an optional health check path. This path is invoked every couple of seconds so that the load balancer can ensure your service is healthy. By default the health check path is <code>/</code> - but this can be changed to anything.</p>
<h4 id="scaling">Scaling</h4>
<p>The next sectionin includes the resources allocated to your service. Load Balanced Web Services are run on AWS Fargate, meaning all you have to do is say how much CPU and memory your service needs. This section also includes how many coppies of your service you want up and running. By default, only one copy of your service is spun up, but that number can be increased to handle more load.</p>
<h4 id="variables">Variables</h4>
<p>The variable section includes environment variables that will be passed to your service. There are a number of environment variables that are passed in by default.</p>
<h4 id="secrets">Secrets</h4>
<p>The secrets section let&rsquo;s you pass in secret values to your service as environment variables, securely. In this example, the environment variable <code>GITHUB_TOKEN</code> will be set in your service and the value will be extracted from an AWS SSM Parameter named <code>GH_SECRET_TOKEN</code>.</p>
<h4 id="environments">Environments</h4>
<p>The environment section lets you overwrite any value in your manifest based on the environment you&rsquo;re in. In the example manifest above, we&rsquo;re overriding the <em>count</em> parameter so that we can run 2 coppies of our service in or <em>prod</em> environment.</p>
<h3 id="deploying-a-service">Deploying a Service</h3>
<p>Once you&rsquo;ve set up your service, you can deploy it (and any changes to your manifest) by running the deploy command:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ copilot deploy
</code></pre></div><p>Running this command will:</p>
<ol>
<li>Build your image locally</li>
<li>Push to your service&rsquo;s ECR repository</li>
<li>Convert your manifest file to CloudFormation</li>
<li>Package any additional infrastructure into CloudFormation</li>
<li>Deploy your updated service and resources to CloudFormation</li>
</ol>
<p>If you have multiple environments, you&rsquo;ll be prompted to select which environment you want to deploy to.</p>
<h3 id="digging-into-your-service">Digging into your Service</h3>
<p>Now that we&rsquo;ve got a service up and running, we can check on it using Copilot. Below are a few common ways to check in on your deployed service.</p>
<h4 id="whats-in-your-service">What&rsquo;s in your service?</h4>
<p>Running <code>copilot svc show</code> will show you a summary of your service. Here&rsquo;s an example of the output you might see for a load balanced web application. This output includes the configuration of your service for each environment, all the endpoints for your service, and the environment variables passed into your service. You can also provide an optional <code>--resources</code> flag to see all AWS resources associated with your service.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ copilot svc show
About

  Application       my-app
  Name              front-end
  Type              Load Balanced Web Service

Configurations

  Environment       Tasks               CPU <span style="color:#ce5c00;font-weight:bold">(</span>vCPU<span style="color:#ce5c00;font-weight:bold">)</span>          Memory <span style="color:#ce5c00;font-weight:bold">(</span>MiB<span style="color:#ce5c00;font-weight:bold">)</span>        Port
  <span style="color:#204a87">test</span>              <span style="color:#0000cf;font-weight:bold">1</span>                   0.25                <span style="color:#0000cf;font-weight:bold">512</span>                 <span style="color:#0000cf;font-weight:bold">80</span>

Routes

  Environment       URL
  <span style="color:#204a87">test</span>              http://my-ap-Publi-1RV8QEBNTEQCW-1762184596.ca-central-1.elb.amazonaws.com

Service Discovery

  Environment       Namespace
  <span style="color:#204a87">test</span>              front-end.my-app.local:8080

Variables

  Name                                Environment         Value
  COPILOT_APPLICATION_NAME            <span style="color:#204a87">test</span>                my-app
  COPILOT_ENVIRONMENT_NAME            <span style="color:#204a87">test</span>                <span style="color:#204a87">test</span>
  COPILOT_LB_DNS                      <span style="color:#204a87">test</span>                my-ap-Publi-1RV8QEBNTEQCW-1762184596.ca-central-1.elb.amazonaws.com
  COPILOT_SERVICE_DISCOVERY_ENDPOINT  <span style="color:#204a87">test</span>                my-app.local
  COPILOT_SERVICE_NAME                <span style="color:#204a87">test</span>                front-end
</code></pre></div><h4 id="whats-your-service-status">What&rsquo;s your service status?</h4>
<p>Often it&rsquo;s handy to be able to check on the status of your service. Are all the instances of my service healthy? Are there any alarms firing? To do that, you can run <code>copilot svc status</code> to get a summary of your service&rsquo;s status.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ copilot svc status
Service Status

  ACTIVE <span style="color:#0000cf;font-weight:bold">1</span> / <span style="color:#0000cf;font-weight:bold">1</span> running tasks <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">0</span> pending<span style="color:#ce5c00;font-weight:bold">)</span>

Last Deployment

  Updated At        <span style="color:#0000cf;font-weight:bold">12</span> minutes ago
  Task Definition   arn:aws:ecs:ca-central-1:693652174720:task-definition/my-app-test-front-end:1

Task Status

  ID                Image Digest        Last Status         Health Status       Started At          Stopped At
  37236ed3          da3cfcdd            RUNNING             HEALTHY             <span style="color:#0000cf;font-weight:bold">12</span> minutes ago      -

Alarms

  Name              Health              Last Updated        Reason
  CPU-Utilization   OK                  <span style="color:#0000cf;font-weight:bold">5</span> minutes ago       -
</code></pre></div><h4 id="where-are-my-service-logs">Where are my service logs?</h4>
<p>Checking the your service logs is easy as well. Running <code>copilot svc logs</code> will show the most recent logs of your service. You can follow your logs live with the <code>--follow</code> flag.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ copilot svc logs
37236ed 10.0.0.30 🚑 Health-check ok!
37236ed 10.0.0.30 🚑 Health-check ok!
37236ed 10.0.0.30 🚑 Health-check ok!
37236ed 10.0.0.30 🚑 Health-check ok!
37236ed 10.0.0.30 🚑 Health-check ok!
</code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified July 2, 2020: <a  href="https://github.com/aws/copilot-cli/commit/616f4b71bfd32b7fda277e681f4fc9109afb259a">docs: add website content (#1080) (616f4b7)</a>
</div>
</div>


                </main>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/copilot-demo-docs/js/main.min.a822434404cc19434f6eed64670a77da5565d2558b969d22c01066e2b199cef4.js" integrity="sha256-qCJDRATMGUNPbu1kZwp32lVl0lWLlp0iwBBm4rGZzvQ=" crossorigin="anonymous"></script>



</body>
</html>